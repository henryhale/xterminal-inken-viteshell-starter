var At=Object.defineProperty;var St=(s,t,e)=>t in s?At(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var d=(s,t,e)=>(St(s,typeof t!="symbol"?t+"":t,e),e),Q=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var c=(s,t,e)=>(Q(s,t,"read from private field"),e?e.call(s):t.get(s)),y=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},v=(s,t,e,i)=>(Q(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e);var M=(s,t,e)=>(Q(s,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();/**
 *  XTerminal - v2.1.9
 *  @author Henry Hale
 *  @license MIT
 *  @url https://github.com/henryhale/xterminal
 */var F,mt;let yt=(mt=class{constructor(){y(this,F,void 0);d(this,"isDisposed");this.isDisposed=!1,v(this,F,[])}register(t){this.isDisposed?t==null||t.dispose():c(this,F).push(t)}dispose(){this.isDisposed||(this.isDisposed=!0,c(this,F).forEach(t=>t==null?void 0:t.dispose()))}},F=new WeakMap,mt);var x,vt;let $t=(vt=class extends yt{constructor(){super();y(this,x,void 0);v(this,x,{stack:[],store:new Map}),this.register({dispose:()=>c(this,x).store.clear()})}on(e,i){var n;const r=c(this,x).store;r.has(e)?(n=r.get(e))==null||n.add(i):r.set(e,new Set([i]))}once(e,i){var a;const r=(...o)=>{i.call(void 0,...o),this.off(e,r)},n=c(this,x).store;n.has(e)?(a=n.get(e))==null||a.add(r):n.set(e,new Set([r]))}off(e,i){const r=c(this,x).store.get(e);if(r){for(const n of r)if(n===i){r.delete(i);break}}}emit(e,...i){if(this.isDisposed)return;const r=c(this,x).stack;if(r.includes(e))return;const n=c(this,x).store.get(e);if(n){r.push(e);for(const a of n)a.call(void 0,...i);r.pop()}}},x=new WeakMap,vt);const wt=Array.isArray;function at(s){return typeof s=="object"&&s!==null}function T(s){return typeof s=="function"}let Ot=class{constructor(t=[]){d(this,"store");d(this,"ptr");this.store=wt(t)?t:[],this.ptr=-1}get size(){return this.store.length}get list(){return[].slice.call(this.store).reverse()}add(t){t&&t!==this.store[0]&&this.store.unshift(t),this.ptr=-1}get previous(){return this.ptr++,this.ptr>=this.size&&(this.ptr=this.size-1),this.store[this.ptr]||""}get next(){return this.ptr--,this.ptr<=-1&&(this.ptr=-1),this.store[this.ptr]||""}clear(){this.store.splice(0)}};const L="&nbsp;",Tt="xt",ct="xt-inactive",kt="xt-cursor",Mt="xt-stdout",Lt="xt-stdin";function lt(s){s&&s.scrollTo(0,s.scrollHeight)}function $(s,t){const e=document.createElement(s);return at(t)&&(t!=null&&t.id&&(e.id=t.id||""),t!=null&&t.class&&(e.className=t.class||""),t!=null&&t.content&&e.appendChild(document.createTextNode(""+t.content)),t!=null&&t.html&&(e.innerHTML=t.html),wt(t==null?void 0:t.children)&&t.children.forEach(i=>e.append(i)),at(t==null?void 0:t.props)&&Object.entries(t.props).forEach(i=>e.setAttribute(i[0],i[1]))),e}function Nt(s=""){return(""+s).replace(/(\n)|(\n\r)|(\r\n)/g,"<br/>").replace(/\s{2}/g,L.repeat(2)).replace(/\t/g,L.repeat(4))}let Pt=class{constructor(t){d(this,"el");d(this,"console");d(this,"lastOutput");d(this,"onoutput");const{outputBox:e,consoleBox:i}=function(r){const n=$("span"),a=$("div",{class:Mt,children:[n]});return r.appendChild(a),{outputBox:a,consoleBox:n}}(t);this.el=e,this.console=i}write(t,e){this.lastOutput=$("span",{html:Nt(t)}),this.console.appendChild(this.lastOutput),T(this.onoutput)&&this.onoutput(),T(e)&&e()}clear(){this.console&&(this.console.innerHTML="")}clearLast(){var t;this.lastOutput&&((t=this.lastOutput.parentNode)==null||t.removeChild(this.lastOutput)),this.lastOutput=void 0}};const bt="Enter";function O(s,t,e,i){s.addEventListener(t,e,i);let r=!1;return{dispose(){r||(s.removeEventListener(t,e,i),r=!0)}}}const Ct=0;function Et(s,...t){return setTimeout(s,Ct,...t)}function ut(s){let t;return(...e)=>{T(s)&&(clearTimeout(t),t=Et(s,...e))}}let X;function K(s){const t=new Set;let e=!1;return{get value(){return!e&&T(X)&&t.add(X),s},set value(i){s=i,e||t.forEach(r=>r.call(void 0))},dispose(){e||(e=!0,t.clear())}}}function st(s){if(T(s)){X=s;try{s.call(void 0)}finally{X=null}}}class Dt extends yt{constructor(e){super();d(this,"el");d(this,"buffer");d(this,"data");d(this,"ptr");d(this,"isActive");d(this,"showInput");d(this,"isFocused");d(this,"onkeypress");this.el=function(a){const o=$("input",{props:{spellcheck:!1,autocapitalize:"off",autocomplete:"off"}}),u=$("div",{class:Lt,children:[o]});return a.appendChild(u),o}(e),this.buffer="",this.data=K(""),this.ptr=K(0),this.isActive=K(!0),this.showInput=K(!0),this.isFocused=K(!1),this.register(this.data),this.register(this.ptr),this.register(this.isActive),this.register(this.showInput),this.register(this.isFocused);const i=()=>function(a,o,u){let l="selectionStart"in(h=a)?h.selectionStart:0;var h;const f=o.value.length;l>f?l=f:l<0&&(l=0),u.value=l}(this.el,this.data,this.ptr),r=ut(i),n=ut(()=>{this.data.value=this.buffer=this.el.value});st(i),this.register(O(this.el,"blur",()=>this.isFocused.value=!1)),this.register(O(this.el,"focus",()=>this.isFocused.value=!0,!1)),this.register(O(this.el,"keyup",()=>this.isActive.value&&r(),!1)),this.register(O(this.el,"input",()=>{n(),r()})),this.register(O(this.el,"keydown",a=>{a.stopImmediatePropagation();const o=this.data.value;a.key===bt&&(this.el&&(this.el.value=""),this.data.value="",this.buffer="",this.showInput.value=!0),this.isActive.value&&T(this.onkeypress)&&(this.onkeypress({key:a.key,altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey,value:o,cancel(){a.preventDefault(),a.stopPropagation()}}),r())}))}blur(){this.el&&this.el.blur()}focus(){this.el&&this.el.focus()}pause(){this.isActive.value=!1}resume(){this.isActive.value=!0}setValue(e){e=e||this.buffer,this.el&&(this.el.value=e),this.data.value=e}pipe(e){var a;const i=$("span"),r=$("span",{class:kt,html:L}),n=$("span");(a=e.el)==null||a.append(i,r,n),st(()=>{const o=this.ptr.value,u=this.data.value;if(!this.isActive.value||!this.showInput.value)return i.innerHTML="",r.innerHTML=L,void(n.innerHTML="");i.innerHTML=u.substring(0,o).replace(/\s{2}/g," "+L),r.innerHTML=u.substring(o,o+1).trim()||L,n.innerHTML=u.substring(o+1).replace(/\s{2}/g," "+L)})}}function Ft(s,t){const e=$("div",{class:Tt,props:{tabindex:0}}),i=new Ot,r=new Pt(e),n=new Dt(e),a={input:n,output:r,history:i,completer:o=>o};return n.pipe(r),r.onoutput=()=>lt(e),s.register(O(e,"keydown",function(o){n.focus(),Et(()=>{n.el.dispatchEvent(new KeyboardEvent("keydown",o)),n.el.dispatchEvent(new KeyboardEvent("input",o))})})),s.register(O(e,"focus",()=>n.isFocused.value=!0)),s.register(O(e,"blur",()=>n.isFocused.value=!1)),function(){const o=window||{},u=navigator||{};return!(!("ontouchstart"in o)&&!u.maxTouchPoints||!/Mobi/.test(u.userAgent))}()&&s.register(O(e,"click",n.focus.bind(n))),t.appendChild(e),n.onkeypress=o=>{o.key==bt?(o.cancel(),i.add(o.value),s.writeln(o.value),s.emit("data",o.value)):o.key=="Tab"?(o.cancel(),T(a.completer)&&n.setValue(a.completer(o.value))):o.key=="ArrowDown"?(o.cancel(),n.setValue(i.next)):o.key=="ArrowUp"?(o.cancel(),n.setValue(i.previous)):s.emit("keypress",o),lt(e)},st(()=>{n.isFocused.value?e.classList.remove(ct):e.classList.add(ct)}),a}let Ht=class extends Error{constructor(t){super(t="[x] "+t),this.name="XTerminalError"}};var p;class It extends $t{constructor(e){super();y(this,p,void 0);d(this,"isMounted");this.isMounted=!1,e&&(e!=null&&e.target)&&this.mount(e.target)}focus(){c(this,p).input.focus()}blur(){c(this,p).input.blur()}pause(){c(this,p).input.pause(),this.emit("pause")}resume(){c(this,p).input.resume(),this.emit("resume")}write(e,i){c(this,p).output.write(""+e,i)}writeln(e,i){c(this,p).output.write(e+`
`,i)}clear(){c(this,p).output.clear(),this.emit("clear")}clearLast(){c(this,p).output.clearLast()}get history(){return c(this,p).history.list||[]}set history(e){e.forEach(i=>c(this,p).history.add(i))}clearHistory(){c(this,p).history.clear()}setCompleter(e){T(e)&&(c(this,p).completer=e)}mount(e){if(!this.isMounted){if(e&&typeof e=="string"&&(e=document.querySelector(e)),!(e instanceof HTMLElement))throw new Ht("mount: A parent HTMLElement (target) is required");!e.isConnected&&console&&console.warn("'mount' was called on an HTMLElement (target) that is not attached to DOM."),e.innerHTML="",v(this,p,Ft(this,e)),this.isMounted=!0}}dispose(){var r;super.dispose();const e=c(this,p);e.history.clear(),e.completer=void 0,e.input.dispose();const i=e.output.el.parentNode;(r=i==null?void 0:i.parentNode)==null||r.removeChild(i)}static get version(){return"2.1.9"}}p=new WeakMap;/**
 *  viteshell - v0.8.1
 *  @author Henry Hale
 *  @license MIT
 *  @url https://github.com/henryhale/viteshell#readme
 */function D(s){return typeof s=="function"}function it(){return Math.floor(1024*Math.random()*50)}class jt{constructor(){d(this,"buffer");d(this,"extractor");this.buffer=[],this.extractor=void 0}get isBusy(){return this.extractor!==void 0}insert(t=""){this.buffer.push(t),D(this.extractor)&&this.extractor.call(void 0)}get extract(){var t;return((t=this.buffer.shift())==null?void 0:t.trim())||""}readline(){return new Promise(t=>{this.buffer.length?t(this.extract):this.extractor=()=>{this.extractor=void 0,t(this.extract)}})}reset(){this.buffer.splice(0),this.extractor=void 0}}class Rt{constructor(){d(this,"isActive");d(this,"bufferOutput");d(this,"buffer");d(this,"onoutput");d(this,"onerror");d(this,"onclear");this.isActive=!0,this.bufferOutput=!1,this.buffer=[]}disable(){this.isActive=!1}enable(){this.isActive=!0}clear(){var t;(t=this.onclear)==null||t.call(void 0)}write(t,e="data"){var i;this.isActive&&(t=t==null?void 0:t.toString(),this.bufferOutput?this.buffer.push({type:e,data:t}):(i=e=="data"?this.onoutput:this.onerror)==null||i.call(void 0,t))}error(t){this.write(t,"error")}get extract(){return this.buffer.splice(0).map(t=>t.data+"")}flush(){this.bufferOutput=!1,this.buffer.length&&this.buffer.splice(0).forEach(t=>{this.write(t.data,t.type)})}reset(){this.flush(),this.enable()}}const rt="v0.8.1",b="vsh",V="?",tt=b+": process aborted!",Kt=b+": process timed out!",Bt=b+": process terminated!",ht="RANDOM",Ut=b+": inactive, use shell.reset() to activate",Wt={SHELL:b,USERNAME:"user",HOSTNAME:"web",CWD:"/",PS1:"$USERNAME@$HOSTNAME: $CWD $ ",PS2:"> ","?":"0",RANDOM:""+it()};function Y(s,t=""){let e;return(""+t).replace(/(?:\$([a-z_][a-z0-9_]+|\?))/gi,i=>(e=s[i.slice(1)],e===void 0?"":e.toString()))}function dt(s){return s.match(/^([a-zA-Z0-9_]+)=(.*)$/)}function nt(s,t){if(s)return t&&s.AND?s.AND:!t&&s.OR?s.OR:nt(s.AND,t)||nt(s.OR,t)}let W;const B=[";","|","&&","||"];function q(s){const t={cmd:"",args:"",argv:[],PIPE:void 0,AND:void 0,OR:void 0};t.cmd=s.shift()||"";const e=s.findIndex(i=>B.slice(1).includes(i));return e===-1?(t.argv=s.splice(0),t.args=(t.cmd+" "+t.argv.join(" ")).trim(),t):(t.argv=s.splice(0,e),t.args=(t.cmd+" "+t.argv.join(" ")).trim(),s[0]===B[1]&&(t.PIPE=q(s.splice(1))),s[0]===B[2]&&(t.AND=q(s.splice(1))),s[0]===B[3]&&(t.OR=q(s.splice(1))),t)}function zt(s){return function(t){const e=[];if(!t||typeof t!="string")return e;const i=[];let r,n=!1,a=!1,o=!1,u=!1,l="";if(B.some(h=>t.startsWith(r=h)||t.endsWith(h)))throw new SyntaxError("unexpected token '"+r+"'");if(t.split("").forEach((h,f,R)=>{if(n&&h==="'")return n=!1,void(u=!0);if(!n&&!a&&!o){if(h==="'")return void(n=!0);if(h==='"')return void(a=!0);if(h==="\\")return void(o=!0);if(["\b","\f",`
`,"\r","	"," ",";"].includes(h))return(l.length>0||u)&&(i.push(l),u=!1),h===";"&&i.length&&e.push(i.splice(0)),void(l="")}if(!n&&a&&!o&&h==='"')return a=!1,void(u=!0);!n&&a&&!o&&h==="\\"&&(o=!0,['"',"`","$","\\"].includes(R[f+1]))||(o&&(o=!1),l+=h)}),(l.length>0||u)&&(i.push(l),u=!1),i.length&&e.push(i),a)throw new SyntaxError("unexpected end of string while looking for matching double quote");if(n)throw new SyntaxError("unexpected end of string while looking for matching single quote");if(o)throw new SyntaxError("unexpected end of string right after slash");return e}(s).map(t=>q(t))}function Vt(s,t,e,i){let r=!1;const{signal:n}=i;n.addEventListener("abort",()=>r=!0);const a={readline:()=>r?Promise.resolve(""):t.readline()},o={clear:()=>!r&&e.clear(),write:l=>{r||e.write(Y(s.env,l))},writeln:l=>o.write(l+`
`)},u={write:l=>{r||e.error(Y(s.env,l))},writeln:l=>u.write(l+`
`)};return{cmd:"",args:"",argv:[],get env(){return s.env},get stderr(){return u},get stdin(){return a},get stdout(){return o},get history(){return s.history},get version(){return rt},get exitCode(){return function(l,h=0){const f=parseInt(""+l);return isNaN(f)?h:f}(s.env[V])},exit:l=>{i.abort(l||Bt)},onExit:l=>{n.addEventListener("abort",()=>{l.call(void 0,n.reason.toString())})}}}function pt(){return{env:Object.assign(Object.create(null),Wt),alias:{},history:[]}}function ft(s){return JSON.parse(typeof s=="string"?s:JSON.stringify(s))}var g,A,w,S,N,H,U,I,J,j,_;class qt{constructor(){y(this,I);y(this,j);y(this,g,void 0);y(this,A,void 0);y(this,w,void 0);y(this,S,void 0);y(this,N,void 0);y(this,H,void 0);y(this,U,void 0);var t,e;v(this,g,new Rt),v(this,A,new jt),v(this,w,pt()),v(this,S,new Map),v(this,N,!1),v(this,H,void 0),t=c(this,S),e=c(this,w),t.set("exit",{synopsis:"exit",description:"Terminate the current process",action:({exit:i})=>{W==null||W.call(void 0),i()}}),t.set("clear",{synopsis:"clear",description:"Clear the entire standard output stream.",action:({stdout:i})=>i.clear()}),e.alias.cls="clear",t.set("pwd",{synopsis:"pwd",description:"Print current working directory.",action:({stdout:i})=>i.writeln("$CWD")}),t.set("echo",{synopsis:"echo [...args]",description:"Write arguments to the standard output followed by a new line character.",action:({argv:i,stdout:r})=>r.writeln(i.join(" "))}),e.alias.print="echo",t.set("alias",{synopsis:"alias [-p] [name=[value] ... ]",description:"Defines aliases for commands",action:({argv:i,stdout:r})=>{!i.length||i.includes("-p")?(r.write("Aliases:"),Object.entries(e.alias).forEach(([n,a])=>{r.write(`
	alias `+n+"='"+a+"'")}),r.write(`
`)):i.forEach(n=>{const a=dt(n);if(a){const[,o,u]=a;e.alias[o.trim()]=u.trim()}})}}),t.set("unalias",{synopsis:"unalias [name ... ]",description:"Removes aliases for commands",action:({argv:i})=>{i.length&&i.forEach(r=>{delete e.alias[r]})}}),t.set("export",{synopsis:"export [-p] [name=[value] ... ]",description:"Set shell variables by name and value",action:({argv:i,env:r,stdout:n})=>{!i.length||i.includes("-p")?Object.entries(r).forEach(([a,o])=>{n.write("var "+a+'="'+(o!=null&&o.toString().includes("$")?o.toString().split("").join("\\"):o)+`"
`)}):i.forEach(a=>{const o=dt(a);if(o){const[,u,l]=o;r[u.trim()]=l.trim()}})}}),t.set("history",{synopsis:"history [-c] [-n]",description:"Retrieve previous input entries",action:({argv:i,history:r,stdout:n})=>{i.includes("-c")?r.splice(0):i.includes("-n")?n.writeln(`History: ${r.length}`):r.forEach((a,o)=>{n.writeln("  "+o+"	"+a)})}}),t.set("help",{synopsis:"help [command]",description:"Displays information on available commands.",action:({argv:i,stdout:r})=>{if(i[0]){const n=i[0],a=t.get(n);if(!a)throw"help: no information matching '"+n+"'";const{synopsis:o,description:u}=a;r.writeln(n+": "+o+`
	`+u)}else r.write("ViteShell, "+rt+` Help

A list of all available commands

`),Array.from(t.values()).map(n=>n.synopsis).sort().forEach(n=>r.writeln(n))}}),e.alias.info="help",e.alias.man="help",t.set("read",{synopsis:"read [prompt] [variable]",description:"Capture input and save it in the env object.",action:async({argv:i,env:r,stdin:n,stdout:a})=>{if(!i[0]||!i[1])throw"invalid arguments: specify the prompt and variable name";a.write(i[0]),r[i[1]]=await n.readline()}}),t.set("sleep",{synopsis:"sleep [seconds]",description:"Delay for a specified amount of time (in seconds).",action:async({argv:i,onExit:r})=>{const n=parseInt(i[0],10);if(isNaN(n)||n<=0)throw"invalid time specified (minimum is 1)";await new Promise(a=>{let o;r(()=>{clearTimeout(o),a()}),o=setTimeout(()=>a(),1e3*n)})}}),t.set("grep",{synopsis:"grep [keyword] [context ...]",description:"Searches for matching phrases in the text",action:async({argv:i,stdout:r})=>{if(i.length<2)throw"invalid arguments";const n=new RegExp(i[0],"g");i.slice(1).forEach(a=>{n.test(a)&&r.writeln(a.replaceAll(i[0],o=>"**"+o+"**"))})}}),t.set("date",{synopsis:"date",description:"Displays the current time and date",action:({stdout:i})=>i.writeln(new Date().toString())})}get alias(){return c(this,w).alias}get env(){return c(this,w).env}get history(){return c(this,w).history}set onoutput(t){if(!D(t))throw new TypeError(`${b}: onoutput handler must be a function.`);c(this,g).onoutput=t}set onerror(t){if(!D(t))throw new TypeError(`${b}: onerror handler must be a function.`);c(this,g).onerror=t}set onclear(t){if(!D(t))throw new TypeError(`${b}: onclear handler must be a function.`);c(this,g).onclear=t}set onexit(t){if(!D(t))throw new TypeError(`${b}: onexit handler must be a function.`);W=t}addCommand(t,e){if(c(this,S).has(t))throw new Error(`${b}: '${t}' command already exists. If you are providing a custom command implementation, remove the command first.`);if(!function(i){return typeof(r=i)=="object"&&r!==null&&D(i.action)&&!!i.description&&!!i.synopsis;var r}(e))throw new Error(`${b}: invalid command configuration.`);c(this,S).set(t,e)}removeCommand(t){c(this,S).delete(t)}listCommands(){return Array.from(c(this,S).keys())}exportState(){return JSON.stringify(c(this,w))}loadState(t){v(this,w,Object.assign(pt(),ft(t)))}reset(t=""){v(this,N,!0),c(this,A).reset(),c(this,g).clear(),t&&(t=Y(this.env,t+`
`),c(this,g).write(t)),M(this,I,J).call(this)}setExecutionTimeout(t){if(!(typeof t=="number"&&t>0))throw new TypeError(`${b}: invalid value for timeout.`);v(this,U,1e3*t)}async execute(t=""){if(!c(this,N))return Promise.reject(Ut);if(c(this,A).isBusy)return c(this,A).insert(t),Promise.resolve();if(c(this,A).reset(),c(this,g).reset(),typeof t!="string"||!t.trim())return M(this,I,J).call(this),Promise.resolve();(t=t.trim())!=this.history.at(-1)&&this.history.push(t);const e=ft(c(this,w)),i=new AbortController,r=i.signal;v(this,H,i),r.addEventListener("abort",()=>{c(this,A).reset()});const n=Vt(e,c(this,A),c(this,g),i);return function(o,u,l){const{signal:h}=o;let f;return l&&l>0&&(f=setTimeout(()=>{o.abort(Kt)},l)),new Promise((R,C)=>{h.addEventListener("abort",()=>{clearTimeout(f),C(h.reason.toString()||tt)}),u(h,C).then(R).catch(C).finally(()=>clearTimeout(f))})}(i,async(o,u)=>{try{const f=zt(t);for(const R of f){if(o.aborted)throw tt;try{await M(this,j,_).call(this,R,n),e.env[V]="0",l=c(this,w),h=e,Object.assign(l.alias,h.alias),Object.assign(l.env,h.env),l.history.splice(0),l.history.push(...h.history)}catch(C){if(!(f.length>1))throw C;n.stderr.write(C+`
`),e.env[V]="1"}}}catch(f){u(f.toString())}var l,h},c(this,U)).catch(o=>{c(this,g).error(o+`
`),c(this,w).env[V]="1"}).finally(()=>{M(this,I,J).call(this)})}abort(t){var e;(e=c(this,H))==null||e.abort(t||tt)}static get version(){return rt}}g=new WeakMap,A=new WeakMap,w=new WeakMap,S=new WeakMap,N=new WeakMap,H=new WeakMap,U=new WeakMap,I=new WeakSet,J=function(){this.env[ht]=""+it(),c(this,g).reset(),c(this,g).write(Y(this.env,this.env.PS1))},j=new WeakSet,_=async function(t,e){let i="";const r=async()=>{if(t.OR||t.AND){const o=nt(t,!i.length);o&&(i.length&&(e.stderr.writeln(i),i=""),await M(this,j,_).call(this,o,e))}if(i.length)throw i},n=this.alias[t.cmd];if(n){const o=n.split(" ");t.cmd=o.shift()||"",o.length&&t.argv.unshift(...o),t.args=(t.cmd+" "+t.argv.join(" ")).trim()}const a=c(this,S).get(t.cmd);if(!a)return i=t.cmd+": command not found",await r();e.cmd=t.cmd,e.argv=t.argv,e.env[ht]=""+it(),c(this,g).bufferOutput=t.PIPE!==void 0;try{t.cmd==="exit"&&v(this,N,!1),await a.action.call(void 0,e)}catch(o){i=t.cmd+": "+o}t.PIPE&&(t.PIPE.argv.push(...c(this,g).extract),await M(this,j,_).call(this,t.PIPE,e)),await r()};const P=function(t,e){return function(){const i=arguments,r=arguments.length;let n=arguments[0];if(r===0)return"";if(r>1)for(let o=1;o<r;o++)n+=" "+i[o];if(typeof n=="object"&&n!==null)return n[t]=e,n;const a={toString(){const o=this.bg||this.fg||this.dim;return(o?'<span style="':"")+(this.bg?"background-color:"+this.bg+";":"")+(this.fg?"color:"+this.fg+";":"")+(this.dim?"opacity:0.5;":"")+(o?'">':"")+(this.bold?"<b>":"")+(this.underline?"<u>":"")+(this.strikethrough?"<s>":"")+(this.italic?"<i>":"")+(this.value||"")+(this.italic?"</i>":"")+(this.strikethrough?"</s>":"")+(this.underline?"</u>":"")+(this.bold?"</b>":"")+(o?"</span>":"")},toJSON(){return this.toString()}};return a[t]=e,a.value=n,a}},z={black:"#000000",red:"#FA5E5E",green:"#50FA7B",yellow:"#FEF08A",blue:"#60A5FA",magenta:"#FF79C6",cyan:"#67E8F9",white:"#FFFFFF",gray:"#71717A"},k={};k.bold=P("bold",!0);k.italic=P("italic",!0);k.underline=P("underline",!0);k.strikethrough=P("strikethrough",!0);k.dim=P("dim",!0);for(const s in z)Object.hasOwnProperty.call(z,s)&&(k[s]=P("fg",z[s]),k["bg"+s[0].toUpperCase()+s.slice(1)]=P("bg",z[s]));const{bold:se,italic:Jt,underline:ie,strikethrough:re,dim:_t,black:ne,red:G,green:ot,yellow:oe,blue:ae,magenta:et,cyan:xt,white:ce,gray:gt,bgBlack:le,bgRed:ue,bgGreen:he,bgYellow:de,bgBlue:pe,bgMagenta:fe,bgCyan:ge,bgWhite:me,bgGray:ve}=k,Z={key:"viteshell",read(){return localStorage.getItem(this.key)},write(s){return localStorage.setItem(this.key,s)}};function Gt(){return`<div class="greeting">
<img src="xterminal.png" width="45" />

${ot("WELCOME TO THE COMMAND LINE INTERFACE")}

${_t(Jt("powered by")+"")}

${et('<a href="https://github.com/henryhale/viteshell">ViteShell</a>')} ${gt("~")} ${et('<a href="https://github.com/henryhale/inken">Inken</a>')} ${gt("~")} ${et(`<a href="https://github.com/henryhale/xterminal">XTerminal</a>
`)}
</div>`}const m=new qt,E=new It;m.onoutput=s=>{E.write(ot(s).toString())};m.onerror=s=>{E.write(G(s).toString())};m.onclear=E.clear.bind(E);m.onexit=()=>{Z.write(m.exportState()),E.dispose(),document.body.innerHTML="<div class='reload'>The terminal process terminated with code: "+m.env["?"]+"<br/> <a href='./'>Reload</a></div>"};E.on("data",s=>m.execute(s));E.on("keypress",s=>{s.ctrlKey&&s.key.toLowerCase()==="c"&&(s.cancel(),m.abort("^C"))});m.env.PS1=""+G("┌[")+ot("$USERNAME")+G("@")+xt("$HOSTNAME")+G(`]
└$`);m.alias.println="echo";m.setExecutionTimeout(10);m.addCommand("login",{synopsis:"login",description:"Demo login process",async action({env:s,stdin:t,stdout:e}){e.write("Username: ");const i=await t.readline();e.write("Token: ");const r=await t.readline();e.write("Logging in as "+xt(i)+`
`),s.USERNAME=i,s.TOKEN=r}});E.on("clear",()=>E.write(Gt()));E.mount("#app");window.onload=()=>{const s=Z.read();s?m.loadState(s):Z.write(m.exportState()),m.reset()};window.onbeforeunload=()=>{Z.write(m.exportState()),E.dispose()};

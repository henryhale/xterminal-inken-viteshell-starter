var $t=Object.defineProperty;var Ot=(i,t,e)=>t in i?$t(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var d=(i,t,e)=>(Ot(i,typeof t!="symbol"?t+"":t,e),e),et=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var c=(i,t,e)=>(et(i,t,"read from private field"),e?e.call(i):t.get(i)),v=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},g=(i,t,e,s)=>(et(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e);var M=(i,t,e)=>(et(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();/**
 *  XTerminal - v2.1.9
 *  @author Henry Hale
 *  @license MIT
 *  @url https://github.com/henryhale/xterminal
 */var F,vt;let wt=(vt=class{constructor(){v(this,F,void 0);d(this,"isDisposed");this.isDisposed=!1,g(this,F,[])}register(t){this.isDisposed?t==null||t.dispose():c(this,F).push(t)}dispose(){this.isDisposed||(this.isDisposed=!0,c(this,F).forEach(t=>t==null?void 0:t.dispose()))}},F=new WeakMap,vt);var E,yt;let St=(yt=class extends wt{constructor(){super();v(this,E,void 0);g(this,E,{stack:[],store:new Map}),this.register({dispose:()=>c(this,E).store.clear()})}on(e,s){var n;const r=c(this,E).store;r.has(e)?(n=r.get(e))==null||n.add(s):r.set(e,new Set([s]))}once(e,s){var a;const r=(...o)=>{s.call(void 0,...o),this.off(e,r)},n=c(this,E).store;n.has(e)?(a=n.get(e))==null||a.add(r):n.set(e,new Set([r]))}off(e,s){const r=c(this,E).store.get(e);if(r){for(const n of r)if(n===s){r.delete(s);break}}}emit(e,...s){if(this.isDisposed)return;const r=c(this,E).stack;if(r.includes(e))return;const n=c(this,E).store.get(e);if(n){r.push(e);for(const a of n)a.call(void 0,...s);r.pop()}}},E=new WeakMap,yt);const bt=Array.isArray;function ct(i){return typeof i=="object"&&i!==null}function k(i){return typeof i=="function"}let Tt=class{constructor(t=[]){d(this,"store");d(this,"ptr");this.store=bt(t)?t:[],this.ptr=-1}get size(){return this.store.length}get list(){return[].slice.call(this.store).reverse()}add(t){t&&t!==this.store[0]&&this.store.unshift(t),this.ptr=-1}get previous(){return this.ptr++,this.ptr>=this.size&&(this.ptr=this.size-1),this.store[this.ptr]||""}get next(){return this.ptr--,this.ptr<=-1&&(this.ptr=-1),this.store[this.ptr]||""}clear(){this.store.splice(0)}};const N="&nbsp;",kt="xt",lt="xt-inactive",Lt="xt-cursor",Mt="xt-stdout",Nt="xt-stdin";function ut(i){i&&i.scrollTo(0,i.scrollHeight)}function $(i,t){const e=document.createElement(i);return ct(t)&&(t!=null&&t.id&&(e.id=t.id||""),t!=null&&t.class&&(e.className=t.class||""),t!=null&&t.content&&e.appendChild(document.createTextNode(""+t.content)),t!=null&&t.html&&(e.innerHTML=t.html),bt(t==null?void 0:t.children)&&t.children.forEach(s=>e.append(s)),ct(t==null?void 0:t.props)&&Object.entries(t.props).forEach(s=>e.setAttribute(s[0],s[1]))),e}function Pt(i=""){return(""+i).replace(/(\n)|(\n\r)|(\r\n)/g,"<br/>").replace(/\s{2}/g,N.repeat(2)).replace(/\t/g,N.repeat(4))}let Ct=class{constructor(t){d(this,"el");d(this,"console");d(this,"lastOutput");d(this,"onoutput");const{outputBox:e,consoleBox:s}=function(r){const n=$("span"),a=$("div",{class:Mt,children:[n]});return r.appendChild(a),{outputBox:a,consoleBox:n}}(t);this.el=e,this.console=s}write(t,e){this.lastOutput=$("span",{html:Pt(t)}),this.console.appendChild(this.lastOutput),k(this.onoutput)&&this.onoutput(),k(e)&&e()}clear(){this.console&&(this.console.innerHTML="")}clearLast(){var t;this.lastOutput&&((t=this.lastOutput.parentNode)==null||t.removeChild(this.lastOutput)),this.lastOutput=void 0}};const Et="Enter";function O(i,t,e,s){i.addEventListener(t,e,s);let r=!1;return{dispose(){r||(i.removeEventListener(t,e,s),r=!0)}}}const Dt=0;function xt(i,...t){return setTimeout(i,Dt,...t)}function ht(i){let t;return(...e)=>{k(i)&&(clearTimeout(t),t=xt(i,...e))}}let Y;function R(i){const t=new Set;let e=!1;return{get value(){return!e&&k(Y)&&t.add(Y),i},set value(s){i=s,e||t.forEach(r=>r.call(void 0))},dispose(){e||(e=!0,t.clear())}}}function it(i){if(k(i)){Y=i;try{i.call(void 0)}finally{Y=null}}}class Ft extends wt{constructor(e){super();d(this,"el");d(this,"buffer");d(this,"data");d(this,"ptr");d(this,"isActive");d(this,"showInput");d(this,"isFocused");d(this,"onkeypress");this.el=function(a){const o=$("input",{props:{spellcheck:!1,autocapitalize:"off",autocomplete:"off"}}),l=$("div",{class:Nt,children:[o]});return a.appendChild(l),o}(e),this.buffer="",this.data=R(""),this.ptr=R(0),this.isActive=R(!0),this.showInput=R(!0),this.isFocused=R(!1),this.register(this.data),this.register(this.ptr),this.register(this.isActive),this.register(this.showInput),this.register(this.isFocused);const s=()=>function(a,o,l){let u="selectionStart"in(h=a)?h.selectionStart:0;var h;const S=o.value.length;u>S?u=S:u<0&&(u=0),l.value=u}(this.el,this.data,this.ptr),r=ht(s),n=ht(()=>{this.data.value=this.buffer=this.el.value});it(s),this.register(O(this.el,"blur",()=>this.isFocused.value=!1)),this.register(O(this.el,"focus",()=>this.isFocused.value=!0,!1)),this.register(O(this.el,"keyup",()=>this.isActive.value&&r(),!1)),this.register(O(this.el,"input",()=>{n(),r()})),this.register(O(this.el,"keydown",a=>{a.stopImmediatePropagation();const o=this.data.value;a.key===Et&&(this.el&&(this.el.value=""),this.data.value="",this.buffer="",this.showInput.value=!0),this.isActive.value&&k(this.onkeypress)&&(this.onkeypress({key:a.key,altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey,value:o,cancel(){a.preventDefault(),a.stopPropagation()}}),r())}))}blur(){this.el&&this.el.blur()}focus(){this.el&&this.el.focus()}pause(){this.isActive.value=!1}resume(){this.isActive.value=!0}setValue(e){e=e||this.buffer,this.el&&(this.el.value=e),this.data.value=e}pipe(e){var a;const s=$("span"),r=$("span",{class:Lt,html:N}),n=$("span");(a=e.el)==null||a.append(s,r,n),it(()=>{const o=this.ptr.value,l=this.data.value;if(!this.isActive.value||!this.showInput.value)return s.innerHTML="",r.innerHTML=N,void(n.innerHTML="");s.innerHTML=l.substring(0,o).replace(/\s{2}/g," "+N),r.innerHTML=l.substring(o,o+1).trim()||N,n.innerHTML=l.substring(o+1).replace(/\s{2}/g," "+N)})}}function Ht(i,t){const e=$("div",{class:kt,props:{tabindex:0}}),s=new Tt,r=new Ct(e),n=new Ft(e),a={input:n,output:r,history:s,completer:o=>o};return n.pipe(r),r.onoutput=()=>ut(e),i.register(O(e,"keydown",function(o){n.focus(),xt(()=>{n.el.dispatchEvent(new KeyboardEvent("keydown",o)),n.el.dispatchEvent(new KeyboardEvent("input",o))})})),i.register(O(e,"focus",()=>n.isFocused.value=!0)),i.register(O(e,"blur",()=>n.isFocused.value=!1)),function(){const o=window||{},l=navigator||{};return!(!("ontouchstart"in o)&&!l.maxTouchPoints||!/Mobi/.test(l.userAgent))}()&&i.register(O(e,"click",n.focus.bind(n))),t.appendChild(e),n.onkeypress=o=>{o.key==Et?(o.cancel(),s.add(o.value),i.writeln(o.value),i.emit("data",o.value)):o.key=="Tab"?(o.cancel(),k(a.completer)&&n.setValue(a.completer(o.value))):o.key=="ArrowDown"?(o.cancel(),n.setValue(s.next)):o.key=="ArrowUp"?(o.cancel(),n.setValue(s.previous)):i.emit("keypress",o),ut(e)},it(()=>{n.isFocused.value?e.classList.remove(lt):e.classList.add(lt)}),a}let It=class extends Error{constructor(t){super(t="[x] "+t),this.name="XTerminalError"}};var p;class jt extends St{constructor(e){super();v(this,p,void 0);d(this,"isMounted");this.isMounted=!1,e&&(e!=null&&e.target)&&this.mount(e.target)}focus(){c(this,p).input.focus()}blur(){c(this,p).input.blur()}pause(){c(this,p).input.pause(),this.emit("pause")}resume(){c(this,p).input.resume(),this.emit("resume")}write(e,s){c(this,p).output.write(""+e,s)}writeln(e,s){c(this,p).output.write(e+`
`,s)}clear(){c(this,p).output.clear(),this.emit("clear")}clearLast(){c(this,p).output.clearLast()}get history(){return c(this,p).history.list||[]}set history(e){e.forEach(s=>c(this,p).history.add(s))}clearHistory(){c(this,p).history.clear()}setCompleter(e){k(e)&&(c(this,p).completer=e)}mount(e){if(!this.isMounted){if(e&&typeof e=="string"&&(e=document.querySelector(e)),!(e instanceof HTMLElement))throw new It("mount: A parent HTMLElement (target) is required");!e.isConnected&&console&&console.warn("'mount' was called on an HTMLElement (target) that is not attached to DOM."),e.innerHTML="",g(this,p,Ht(this,e)),this.isMounted=!0}}dispose(){var r;super.dispose();const e=c(this,p);e.history.clear(),e.completer=void 0,e.input.dispose();const s=e.output.el.parentNode;(r=s==null?void 0:s.parentNode)==null||r.removeChild(s)}static get version(){return"2.1.9"}}p=new WeakMap;/**
 *  viteshell - v0.8.0
 *  @author Henry Hale
 *  @license MIT
 *  @url https://github.com/henryhale/viteshell
 */function D(i){return typeof i=="function"}function rt(){return Math.floor(1024*Math.random()*50)}class Rt{constructor(){d(this,"buffer");d(this,"extractor");this.buffer=[],this.extractor=void 0}get isBusy(){return this.extractor!==void 0}insert(t=""){this.buffer.push(t),D(this.extractor)&&this.extractor.call(void 0)}get extract(){var t;return((t=this.buffer.shift())==null?void 0:t.trim())||""}readline(){return new Promise(t=>{this.buffer.length?t(this.extract):this.extractor=()=>{this.extractor=void 0,t(this.extract)}})}reset(){this.buffer.splice(0),this.extractor=void 0}}class Kt{constructor(){d(this,"isActive");d(this,"bufferOutput");d(this,"buffer");d(this,"onoutput");d(this,"onerror");d(this,"onclear");this.isActive=!0,this.bufferOutput=!1,this.buffer=[]}disable(){this.isActive=!1}enable(){this.isActive=!0}clear(){var t;(t=this.onclear)==null||t.call(void 0)}write(t,e="data"){var s;this.isActive&&(t=t==null?void 0:t.toString(),this.bufferOutput?this.buffer.push({type:e,data:t}):(s=e=="data"?this.onoutput:this.onerror)==null||s.call(void 0,t))}error(t){this.write(t,"error")}get extract(){return this.buffer.splice(0).map(t=>t.data+"")}flush(){this.bufferOutput=!1,this.buffer.length&&this.buffer.splice(0).forEach(t=>{this.write(t.data,t.type)})}reset(){this.flush(),this.enable()}}const nt="v0.8.0",w="vsh",q="?",W=w+": process aborted!",Bt=w+": process timed out!",Ut=w+": process terminated!",dt="RANDOM",Wt=w+": inactive, use shell.reset() to activate",zt={SHELL:w,USERNAME:"user",HOSTNAME:"web",CWD:"/",PS1:"$USERNAME@$HOSTNAME: $CWD $ ",PS2:"> ","?":"0",RANDOM:""+rt()};function Z(i,t=""){let e;return(""+t).replace(/(?:\$([a-z_][a-z0-9_]+|\?))/gi,s=>(e=i[s.slice(1)],e===void 0?"":e.toString()))}function pt(i){return i.match(/^([a-zA-Z0-9_]+)=(.*)$/)}function ot(i,t){if(i)return t&&i.AND?i.AND:!t&&i.OR?i.OR:ot(i.AND,t)||ot(i.OR,t)}let z;const K=[";","|","&&","||"];function J(i){const t={cmd:"",args:"",argv:[],PIPE:void 0,AND:void 0,OR:void 0};t.cmd=i.shift()||"";const e=i.findIndex(s=>K.slice(1).includes(s));return e===-1?(t.argv=i.splice(0),t.args=(t.cmd+" "+t.argv.join(" ")).trim(),t):(t.argv=i.splice(0,e),t.args=(t.cmd+" "+t.argv.join(" ")).trim(),i[0]===K[1]&&(t.PIPE=J(i.splice(1))),i[0]===K[2]&&(t.AND=J(i.splice(1))),i[0]===K[3]&&(t.OR=J(i.splice(1))),t)}function Vt(i){return function(t){const e=[];if(!t||typeof t!="string")return e;const s=[];let r,n=!1,a=!1,o=!1,l=!1,u="";if(K.some(h=>t.startsWith(r=h)||t.endsWith(h)))throw new SyntaxError("unexpected token '"+r+"'");if(t.split("").forEach((h,S,T)=>{if(n&&h==="'")return n=!1,void(l=!0);if(!n&&!a&&!o){if(h==="'")return void(n=!0);if(h==='"')return void(a=!0);if(h==="\\")return void(o=!0);if(["\b","\f",`
`,"\r","	"," ",";"].includes(h))return(u.length>0||l)&&(s.push(u),l=!1),h===";"&&s.length&&e.push(s.splice(0)),void(u="")}if(!n&&a&&!o&&h==='"')return a=!1,void(l=!0);!n&&a&&!o&&h==="\\"&&(o=!0,['"',"`","$","\\"].includes(T[S+1]))||(o&&(o=!1),u+=h)}),(u.length>0||l)&&(s.push(u),l=!1),s.length&&e.push(s),a)throw new SyntaxError("unexpected end of string while looking for matching double quote");if(n)throw new SyntaxError("unexpected end of string while looking for matching single quote");if(o)throw new SyntaxError("unexpected end of string right after slash");return e}(i).map(t=>J(t))}function qt(i,t,e,s){let r=!1;const n={readline:t.readline.bind(t)},a={clear:()=>!r&&e.clear(),write:l=>{r||e.write(Z(i.env,l))},writeln:l=>a.write(l+`
`)},o={write:l=>{r||e.error(Z(i.env,l))},writeln:l=>o.write(l+`
`)};return{cmd:"",args:"",argv:[],get env(){return i.env},get stderr(){return o},get stdin(){return n},get stdout(){return a},get history(){return i.history},get version(){return nt},get exitCode(){return function(l,u=0){const h=parseInt(""+l);return isNaN(h)?u:h}(i.env[q])},exit:l=>{s.signal.addEventListener("abort",()=>r=!0),s.abort(l||Ut)},onExit:l=>{s.signal.addEventListener("abort",()=>{l.call(void 0,s.signal.reason)})}}}function ft(){return{env:Object.assign(Object.create(null),zt),alias:{},history:[]}}function gt(i){return JSON.parse(typeof i=="string"?i:JSON.stringify(i))}var f,x,y,A,P,H,B,I,_,j,G;class Jt{constructor(){v(this,I);v(this,j);v(this,f,void 0);v(this,x,void 0);v(this,y,void 0);v(this,A,void 0);v(this,P,void 0);v(this,H,void 0);v(this,B,void 0);var t,e;g(this,f,new Kt),g(this,x,new Rt),g(this,y,ft()),g(this,A,new Map),g(this,P,!1),g(this,H,void 0),t=c(this,A),e=c(this,y),t.set("exit",{synopsis:"exit",description:"Terminate the current process",action:({exit:s})=>{z==null||z.call(void 0),s()}}),t.set("clear",{synopsis:"clear",description:"Clear the entire standard output stream.",action:({stdout:s})=>s.clear()}),e.alias.cls="clear",t.set("pwd",{synopsis:"pwd",description:"Print current working directory.",action:({stdout:s})=>s.writeln("$CWD")}),t.set("echo",{synopsis:"echo [...args]",description:"Write arguments to the standard output followed by a new line character.",action:({argv:s,stdout:r})=>r.writeln(s.join(" "))}),e.alias.print="echo",t.set("alias",{synopsis:"alias [-p] [name=[value] ... ]",description:"Defines aliases for commands",action:({argv:s,stdout:r})=>{!s.length||s.includes("-p")?(r.write("Aliases:"),Object.entries(e.alias).forEach(([n,a])=>{r.write(`
	alias `+n+"='"+a+"'")}),r.write(`
`)):s.forEach(n=>{const a=pt(n);if(a){const[,o,l]=a;e.alias[o.trim()]=l.trim()}})}}),t.set("unalias",{synopsis:"unalias [name ... ]",description:"Removes aliases for commands",action:({argv:s})=>{s.length&&s.forEach(r=>{delete e.alias[r]})}}),t.set("export",{synopsis:"export [-p] [name=[value] ... ]",description:"Set shell variables by name and value",action:({argv:s,env:r,stdout:n})=>{!s.length||s.includes("-p")?Object.entries(r).forEach(([a,o])=>{n.write("var "+a+'="'+(o!=null&&o.toString().includes("$")?o.toString().split("").join("\\"):o)+`"
`)}):s.forEach(a=>{const o=pt(a);if(o){const[,l,u]=o;r[l.trim()]=u.trim()}})}}),t.set("history",{synopsis:"history [-c] [-n]",description:"Retrieve previous input entries",action:({argv:s,history:r,stdout:n})=>{s.includes("-c")?r.splice(0):s.includes("-n")?n.writeln(`History: ${r.length}`):r.forEach((a,o)=>{n.writeln("  "+o+"	"+a)})}}),t.set("help",{synopsis:"help [command]",description:"Displays information on available commands.",action:({argv:s,stdout:r})=>{if(s[0]){const n=s[0],a=t.get(n);if(!a)throw"help: no information matching '"+n+"'";const{synopsis:o,description:l}=a;r.writeln(n+": "+o+`
	`+l)}else r.write("ViteShell, "+nt+` Help

A list of all available commands

`),Array.from(t.values()).map(n=>n.synopsis).sort().forEach(n=>r.writeln(n))}}),e.alias.info="help",e.alias.man="help",t.set("read",{synopsis:"read [prompt] [variable]",description:"Capture input and save it in the env object.",action:async({argv:s,env:r,stdin:n,stdout:a})=>{if(!s[0]||!s[1])throw"invalid arguments: specify the prompt and variable name";a.write(s[0]),r[s[1]]=await n.readline()}}),t.set("sleep",{synopsis:"sleep [seconds]",description:"Delay for a specified amount of time (in seconds).",action:async({argv:s,onExit:r})=>{const n=parseInt(s[0],10);if(isNaN(n)||n<=0)throw"invalid time specified (minimum is 1)";await new Promise(a=>{let o;r(()=>{clearTimeout(o),a()}),o=setTimeout(()=>a(),1e3*n)})}}),t.set("grep",{synopsis:"grep [keyword] [context ...]",description:"Searches for matching phrases in the text",action:async({argv:s,stdout:r})=>{if(s.length<2)throw"invalid arguments";const n=new RegExp(s[0],"g");s.slice(1).forEach(a=>{n.test(a)&&r.writeln(a.replaceAll(s[0],o=>"**"+o+"**"))})}}),t.set("date",{synopsis:"date",description:"Displays the current time and date",action:({stdout:s})=>s.writeln(new Date().toString())})}get alias(){return c(this,y).alias}get env(){return c(this,y).env}get history(){return c(this,y).history}set onoutput(t){if(!D(t))throw new TypeError(`${w}: onoutput handler must be a function.`);c(this,f).onoutput=t}set onerror(t){if(!D(t))throw new TypeError(`${w}: onerror handler must be a function.`);c(this,f).onerror=t}set onclear(t){if(!D(t))throw new TypeError(`${w}: onclear handler must be a function.`);c(this,f).onclear=t}set onexit(t){if(!D(t))throw new TypeError(`${w}: onexit handler must be a function.`);z=t}addCommand(t,e){if(c(this,A).has(t))throw new Error(`${w}: '${t}' command already exists. If you are providing a custom command implementation, remove the command first.`);if(!function(s){return typeof(r=s)=="object"&&r!==null&&D(s.action)&&!!s.description&&!!s.synopsis;var r}(e))throw new Error(`${w}: invalid command configuration.`);c(this,A).set(t,e)}removeCommand(t){c(this,A).delete(t)}listCommands(){return Array.from(c(this,A).keys())}exportState(){return JSON.stringify(c(this,y))}loadState(t){g(this,y,Object.assign(ft(),gt(t)))}reset(t=""){g(this,P,!0),c(this,x).reset(),c(this,f).clear(),t&&(t=Z(this.env,t+`
`),c(this,f).write(t)),M(this,I,_).call(this)}setExecutionTimeout(t){if(!(typeof t=="number"&&t>0))throw new TypeError(`${w}: invalid value for timeout.`);g(this,B,1e3*t)}async execute(t=""){if(!c(this,P))return Promise.reject(Wt);if(c(this,x).isBusy)return c(this,x).insert(t),Promise.resolve();if(c(this,x).reset(),c(this,f).reset(),typeof t!="string"||!t.trim())return M(this,I,_).call(this),Promise.resolve();(t=t.trim())!=this.history.at(-1)&&this.history.push(t);const e=gt(c(this,y)),s=new AbortController,r=s.signal;g(this,H,s),r.addEventListener("abort",()=>{c(this,x).reset()});const n=qt(e,c(this,x),c(this,f),s);return await function(a,o,l){const u=o.signal,h=new Promise((T,U)=>{u.addEventListener("abort",()=>{U(u.reason||W)}),a.call(void 0,T,U,u)});if(!(l&&l>0))return h;const S=new Promise((T,U)=>{let tt;u.addEventListener("abort",()=>{clearTimeout(tt),U(u.reason||W)}),u.addEventListener("success",()=>{clearTimeout(tt),T()}),tt=setTimeout(()=>{o.abort(Bt)},l)});return Promise.race([S,h]).finally(()=>{o.signal.dispatchEvent(new CustomEvent("success"))})}(async(a,o)=>{try{const h=Vt(t);for(const S of h){if(r.aborted)throw W;try{await M(this,j,G).call(this,S,n),e.env[q]="0",l=c(this,y),u=e,Object.assign(l.alias,u.alias),Object.assign(l.env,u.env),l.history.splice(0),l.history.push(...u.history)}catch(T){if(!(h.length>1))throw T;n.stderr.write(T+`
`),e.env[q]="1"}}a()}catch(h){o(h)}var l,u},s,c(this,B)).catch(a=>{c(this,f).error(a+`
`),c(this,y).env[q]="1"}).finally(()=>{M(this,I,_).call(this)})}abort(t){var e;(e=c(this,H))==null||e.abort(t||W)}static get version(){return nt}}f=new WeakMap,x=new WeakMap,y=new WeakMap,A=new WeakMap,P=new WeakMap,H=new WeakMap,B=new WeakMap,I=new WeakSet,_=function(){this.env[dt]=""+rt(),c(this,f).reset(),c(this,f).write(Z(this.env,this.env.PS1))},j=new WeakSet,G=async function(t,e){let s="";const r=async()=>{if(t.OR||t.AND){const o=ot(t,!s.length);o&&(s.length&&(e.stderr.writeln(s),s=""),await M(this,j,G).call(this,o,e))}if(s.length)throw s},n=this.alias[t.cmd];if(n){const o=n.split(" ");t.cmd=o.shift()||"",o.length&&t.argv.unshift(...o),t.args=(t.cmd+" "+t.argv.join(" ")).trim()}const a=c(this,A).get(t.cmd);if(!a)return s=t.cmd+": command not found",await r();e.cmd=t.cmd,e.argv=t.argv,e.env[dt]=""+rt(),c(this,f).bufferOutput=t.PIPE!==void 0;try{t.cmd==="exit"&&g(this,P,!1),await a.action.call(void 0,e)}catch(o){s=t.cmd+": "+o}t.PIPE&&(t.PIPE.argv.push(...c(this,f).extract),await M(this,j,G).call(this,t.PIPE,e)),await r()};const C=function(t,e){return function(){const s=arguments,r=arguments.length;let n=arguments[0];if(r===0)return"";if(r>1)for(let o=1;o<r;o++)n+=" "+s[o];if(typeof n=="object"&&n!==null)return n[t]=e,n;const a={toString(){const o=this.bg||this.fg||this.dim;return(o?'<span style="':"")+(this.bg?"background-color:"+this.bg+";":"")+(this.fg?"color:"+this.fg+";":"")+(this.dim?"opacity:0.5;":"")+(o?'">':"")+(this.bold?"<b>":"")+(this.underline?"<u>":"")+(this.strikethrough?"<s>":"")+(this.italic?"<i>":"")+(this.value||"")+(this.italic?"</i>":"")+(this.strikethrough?"</s>":"")+(this.underline?"</u>":"")+(this.bold?"</b>":"")+(o?"</span>":"")},toJSON(){return this.toString()}};return a[t]=e,a.value=n,a}},V={black:"#000000",red:"#FA5E5E",green:"#50FA7B",yellow:"#FEF08A",blue:"#60A5FA",magenta:"#FF79C6",cyan:"#67E8F9",white:"#FFFFFF",gray:"#71717A"},L={};L.bold=C("bold",!0);L.italic=C("italic",!0);L.underline=C("underline",!0);L.strikethrough=C("strikethrough",!0);L.dim=C("dim",!0);for(const i in V)Object.hasOwnProperty.call(V,i)&&(L[i]=C("fg",V[i]),L["bg"+i[0].toUpperCase()+i.slice(1)]=C("bg",V[i]));const{bold:ie,italic:_t,underline:re,strikethrough:ne,dim:Gt,black:oe,red:X,green:at,yellow:ae,blue:ce,magenta:st,cyan:At,white:le,gray:mt,bgBlack:ue,bgRed:he,bgGreen:de,bgYellow:pe,bgBlue:fe,bgMagenta:ge,bgCyan:me,bgWhite:ve,bgGray:ye}=L,Q={key:"viteshell",read(){return localStorage.getItem(this.key)},write(i){return localStorage.setItem(this.key,i)}};function Xt(){return`<div class="greeting">
<img src="xterminal.png" width="45" />

${at("WELCOME TO THE COMMAND LINE INTERFACE")}

${Gt(_t("powered by")+"")}

${st('<a href="https://github.com/henryhale/viteshell">ViteShell</a>')} ${mt("~")} ${st('<a href="https://github.com/henryhale/inken">Inken</a>')} ${mt("~")} ${st(`<a href="https://github.com/henryhale/xterminal">XTerminal</a>
`)}
</div>`}const m=new Jt,b=new jt;m.onoutput=i=>{b.write(at(i).toString())};m.onerror=i=>{b.write(X(i).toString())};m.onclear=b.clear.bind(b);m.onexit=()=>{Q.write(m.exportState()),b.dispose(),document.body.innerHTML="<div class='reload'>The terminal process terminated with code: "+m.env["?"]+"<br/> <a href='./'>Reload</a></div>"};b.on("data",async i=>{await m.execute(i)});b.on("keypress",i=>{i.ctrlKey&&i.key.toLowerCase()==="c"&&(i.cancel(),m.abort())});m.env.PS1=""+X("┌[")+at("$USERNAME")+X("@")+At("$HOSTNAME")+X(`]
└$`);m.alias.println="echo";m.addCommand("login",{synopsis:"login",description:"Demo login process",async action({env:i,stdin:t,stdout:e}){e.write("Username: ");const s=await t.readline();e.write("Token: ");const r=await t.readline();e.write("Logging in as "+At(s)+`
`),i.USERNAME=s,i.TOKEN=r}});b.on("clear",()=>b.write(Xt()));b.mount("#app");window.onload=()=>{const i=Q.read();i?m.loadState(i):Q.write(m.exportState()),m.reset()};window.onunload=()=>{Q.write(m.exportState()),b.dispose()};
